"use strict";Handlebars.registerHelper("gravatar",function(t,a){"undefined"==typeof a.hash.size?32:a.hash.size;return'<img src="https://upload.wikimedia.org/wikipedia/en/thumb/3/35/Suncorp_Logo.svg/125px-Suncorp_Logo.svg.png">'}),function(){var t={init:function(){this.getBlips(),this.getUser(),this.layoutSwitcher()},getUser:function(){t.readUser("user.json","#usertmpl","#header")},readUser:function(t,a,i){$.getJSON(t,function(t){var i=$(a).html(),e=Handlebars.compile(i)(t);$("body").prepend(e)})},getBlips:function(){t.readBlips("blips.json","#blipstmpl","#blips")},readBlips:function(a,i,e){$.getJSON(a,function(a){var o=$(i).html(),s=Handlebars.compile(o)(a);$(e).append(s),t.positionBlips(),t.addBlipCaptions()})},positionBlips:function(){var a,i,e,o=$("[data-color]").length,s=.25;$("[data-color]").each(function(){var t=$(this).data("status"),r=$(this).data("color");switch($(this).addClass("blip--"+r),t){case"deprecate":a=($(".radar").width()-$(this).width())/2;break;case"radar":a=($(".assess").width()-$(this).width())/2;break;case"future":a=($(".trial").width()-$(this).width())/2;break;case"standard":a=($(".adopt").width()-$(this).width())/2}switch(r){case"techniques":e=105,i=1;break;case"tools":e=110,i=2;break;case"platforms":e=135,i=3;break;case"frameworks":e=120,i=4}var n=$(this),c=$(".radar").height()/2,d=$(".radar").width()/2,l=9*Math.PI/o,h=c+a*Math.sin(s)-$(this).height()/2,p=d+a*Math.cos(s)-$(this).width()/2;s+=l,n.css("left",h+"px"),n.css("top",p+"px");for(var u,f,m=0;e>m;m++)u=Math.floor(c+a*Math.cos(1.6*(.1*m))),f=Math.floor(d+a*Math.sin(1.6*(.1*m))),n.css("left",u+Math.floor(100*Math.random()+5)+"px"),n.css("top",f+Math.floor(50*Math.random()+5)+"px"),"frameworks"==r&&(n.css("left",u+Math.floor(100*Math.random()+5)-100+"px"),n.css("top",f+Math.floor(50*Math.random()+5)+10+"px"))}),t.tooltips()},addBlipCaptions:function(){$("[data-color]").each(function(){var t,a=$(this).data("status"),i=$(this).data("color"),e=$(this).attr("href"),o=$(this).attr("title");t='<li><a target="_blank" href="'+e+'">'+o+"<span>"+a+"</span></a></li>",$("."+i).append("<ul>"+t+"</ul>")}),t.blipHovers()},blipHovers:function(){var t;$(".radar").hasClass("compact")||$("ul a").on("mouseenter",function(){var a=$(this).contents().filter(function(){return 3==this.nodeType}).text();t=$('.blip[title="'+a+'"]'),$(".tooltip").remove(),t.trigger("mouseenter")}).on("mouseleave",function(){t.trigger("mouseout")})},layoutSwitcher:function(){var t=document.querySelector(".js-switch");new Switchery(t,{size:"small",color:"#00cc99"});t.onchange=function(){$(".radar").toggleClass("compact")}},radarStyle:function(){$(window).width()>1200?(t.positionBlips(),$(".radar").removeClass("compact"),$(".layoutswitch").removeClass("inactive")):($(".radar").addClass("compact"),$(".layoutswitch").addClass("inactive"))},tooltips:function(){var t,a,i=$("[rel~=tooltip]"),e=!1,o=!1;i.bind("mouseenter",function(){if(e=$(this),t=e.attr("title"),a=e.data("color"),o=$('<div class="tooltip '+a+'"></div>'),!t||""==t)return!1;e.removeAttr("title"),o.css("opacity",0).html(t).appendTo("body");var i=function(){$(window).width()<1.5*o.outerWidth()?o.css("max-width",$(window).width()/2):o.css("max-width",340);var t=e.offset().left+e.outerWidth()/2-o.outerWidth()/2,a=e.offset().top-o.outerHeight()-20;o.css({left:t,top:a}).addClass("active")};i(),$(window).on("debouncedresize",function(t){i(),$(".tooltip").remove()});var s=function(){o.addClass("inactive"),setTimeout(function(){o.remove()},10),e.attr("title",t)};e.bind("mouseleave",s),o.bind("click",s)})}};$(function(){t.init(),t.radarStyle()}),$(window).on("debouncedresize",function(a){t.radarStyle()})}();